# discord-bot

![Python](https://img.shields.io/badge/Python-3.9-blue.svg)

A simple discord bot written using discord.py. I wrote this to familiarize myself with asynchronous programming & python.

Features:

- Generates a markov chain model from channel activity, and can be configured to randomly respond to messages. Also responds to mentions.

- Lets you play connect four & trivia in a discord text channel.

- Automatically adds spotify links posted in a server into a playlist specific to that server.

- Fetches xkcd comics by ID or presents a random comic

## Prerequisites
- `poetry` for package management

## Installation

1. [Install poetry](https://python-poetry.org/docs/#installation) if needed.

2. Clone the repository

    ```sh
    $ git clone https://github.com/anmolw/discord-bot.git
    ```
    
3. Create a virtualenv and install the project dependencies via poetry

    ```sh 
    $ poetry install
    ```

## Configuration

Edit config.py. Set `bot_token` to the token obtained from discord's developer portal.

### Configuring markov generation channels

Enable developer mode in your discord client. Copy the channel ids for channels which you want to use for markov text generation.

### Setting up the spotify integration

If you want the bot to automatically add spotify song links posted on a discord server to a playlist, you'll need to specify a spotify client ID and secret. These can be generated by creating a new application using the spotify developer portal.

To enable the oauth flow to work, the bot's inbuilt http server will need to be exposed using a reverse proxy.

## Running the bot

The bot can be run directly through poetry (recommended) using the following command:

```sh 
$ poetry run python ./main.py
```

Optionally, you can activate the virtualenv first, then run it
```sh 
$ poetry shell
$ python ./main.py
```

